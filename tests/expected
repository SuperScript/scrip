

#### scrip help offers help

  scrip mode file...
 
    help
      Print this helpful message
 
    deps file...
      Print the list of included file paths
      Path is printed only the first time encountered
      Paths are sorted by order of encounter
 
    code file...
      Print the code in files, resolving includes
      Includes are inserted only the first time encountered
 
0


#### scrip deps lists dependencies

.../tests/basedir/scriptest
.../lib/safe.sh
.../lib/barf.sh
.../lib/shout.sh
0


#### shout prints message to stderr

.../tests/basedir/shout_test: test message
0


#### barf prints fatal message and exits with 111

.../tests/basedir/barf_test: fatal: test error
111


#### scrip code resolves includes

#!/bin/sh
shout() { echo "$0: $*" >&2; }
barf() { shout "fatal: $*"; exit 111; }
safe() { "$@" || barf "cannot $*"; }
safe nosuchprogram
0


#### safe succeeds with valid command

hello world
0


#### safe fails and shows error

.../tests/basedir/safe_fail: fatal: cannot false
111
